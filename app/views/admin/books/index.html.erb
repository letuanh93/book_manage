<% provide :title, "Manage Books" %>
<%= link_to "Add new book", new_admin_book_path, class: "btn btn-primary" %>

<%= form_tag admin_books_path, method: :get do  %>
  <%= text_field_tag :search, params[:search] %>

  <%= select_tag :Category_id,
    options_for_select(@categories.collect{|cate| [cate.Name, cate.id]}, params[:Category_id]),
    include_blank: "All" %>

  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>No.</th>
      <th>Category_id</th>
      <th>Title</th>
      <th>Desc</th>
      <th>Author</th>
      <th>Publisher</th>
      <th>Edit</th>
      <th>Del</th>
    </tr>
  </thead>
  <tbody>
    <% if @books.present? %>
      <% @books.each_with_index do |b, index| %>
        <tr>
          <td>
            <% params[:page] ||= "1" %>
            <%= get_index params[:page], index, 2 %>
          </td>
          <td><%= b.Category_id %></td>
          <td><%= b.Title %></td>
          <td><%= b.Description %></td>
          <td><%= b.Author %></td>
          <td><%= b.Publisher %></td>
          <td><%= link_to "Edit", edit_admin_book_path(b) %></td>
          <td><%= link_to "Del", [:admin, b], method: :delete, data: {confirm: "Sure?"} %></td>
        </tr>
      <% end %>
    <% else %>
      <tr style="text-align: center;"><td colspan="8">No data</td></tr>
    <% end %>
  </tbody>
</table>

<%= will_paginate %>
